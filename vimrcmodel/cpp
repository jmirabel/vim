" vim: syntax=vim

" Set the path and exclude installed header files.
" set path=include,src,tests,$DEVEL_DIR/install/include,/usr/include
set path+=include path+=src path+=tests path+=$DEVEL_DIR/install/include
"let &wildignore='**/install/include/'.substitute(expand('%:p:h:t'), '[-_]', '/', 'g').'/**,'.&wildignore


set expandtab shiftwidth=2 tabstop=8
let &titlestring = expand("%:p:h:t")
let g:cmake_install_prefix="$DEVEL_DIR/install"
let g:cmake_build_dir='build'
" This might be reset by the vim-cmake bundle
set makeprg=cd\ build\ &&\ make

"noremap ,mw :tabnew<CR>:tabmove 0<CR>
noremap ,mm :call RunMake()<CR>
noremap ,mq :call RunMake("-j8")<CR>
noremap ,mi :call RunMake("install")<CR>
noremap ,md :call RunMake("doc")<CR>
noremap ,mu :call RunMake("uninstall")<CR>
noremap ,mc :call RunMake("clean")<CR>
noremap ,msm :call RunMake("-s")<CR>
noremap ,msq :call RunMake("-s -j8")<CR>
noremap ,msi :call RunMake("-s install")<CR>
noremap ,msd :call RunMake("doc")<CR>
noremap ,msu :call RunMake("-s uninstall")<CR>
noremap ,msc :call RunMake("-s clean")<CR>
noremap ,cc :call C_CppcheckCheck ()<CR>:call C_HlMessage ()<CR>
noremap ,cs :SyntasticCheck<CR>

let g:C_CppcheckFiles="include/ src/ tests/"
let g:ctags_command="find . -type f -regextype posix-egrep -regex '.*\.(cc?|.cpp|.hpp|hh?)$' -and -not -path '*/cmake/*' -and -not -path '*/.git/*' -and -not -path '*/build/*' | ctags --totals=yes --sort=foldcase -o tags -L-"

autocmd Syntax c,cpp,idl  set foldmethod=syntax sw=2 ts=8 colorcolumn=80,110
autocmd Syntax python set foldmethod=indent sw=4 ts=4

highlight PendingWhitespace ctermbg=red guibg=lightred
match PendingWhitespace /\s\+$/

set foldlevelstart=3
